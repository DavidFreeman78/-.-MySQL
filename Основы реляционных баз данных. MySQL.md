Lesson_4

/* Задача 1
Заполнить все таблицы БД vk данными (по 10-20 записей в каждой таблице)
*/

use vk;

INSERT INTO users VALUES
('1', 'Артем', 'Романов', 'arro515@example.org', NULL, 89000000000),
('2', 'Lily', 'Kokop', 'Kokop16@example.org', NULL, 89000000001),
('3', 'Семен', 'Логин', 'Semen@example.org', NULL, 89000000002),
('4', 'Илья', 'Ильин', 'Iliin@example.org', NULL, 89000000003),
('5', 'Piter', 'Parker', 'SpiderMan@example.org', NULL, 89000000004),
('6', 'Klark', 'Kent', 'superman@example.org', NULL, 89000000005),
('7', 'Jack', 'Sparrow', 'Vorobei@example.org', NULL, 89000000006),
('8', 'Илья', 'Муромец', 'Murom@example.org', NULL, 89000000007),
('9', 'Алеша', 'Попович', 'alpo518@example.org', NULL, 89000000008),
('10', 'Геральт', 'Ривийский', 'Witcher@example.org', NULL, 89000000009)
;

INSERT INTO profiles VALUES
('1', 'm', 'Москва', '2021-08-31 20:03:53','1977-11-05 20:03:53'),
('2', 'f', 'NewYork', '2021-08-31 20:03:53','1988-11-05 20:03:53'),
('3', 'm', 'PC', '2021-08-31 20:03:53','1999-11-05 20:03:53'),
('4', 'm', 'Ярославль', '2021-08-31 20:03:53','2000-11-05 20:03:53'),
('5', 'm', 'NewYork', '2021-08-31 20:03:53','1991-11-05 20:03:53'),
('6', 'm', 'NewYork', '2021-08-31 20:03:53','1980-11-05 20:03:53'),
('7', 'm', 'Kuba', '2021-08-31 20:03:53','1600-11-05 20:03:53'),
('8', 'm', 'Муром', '2021-08-31 20:03:53','1120-11-05 20:03:53'),
('9', 'm', 'Киев', '2021-08-31 20:03:53','1111-11-05 20:03:53'),
('10', 'm', 'Ривия', '2021-08-31 20:03:53','1012-11-05 20:03:53')
;

INSERT INTO communities VALUES
('1', 'Шмяк-шмяк', '1'),
('2', 'Рога и копыта', '2'),
('3', 'Как победить Венома', '3'),
('4', 'Криптон - достопримечательности', '4'),
('5', 'Сокровища под водой и 10 способов изх найти', '5'),
('6', 'Ведьмачьи рецепты эликсирпов', '6'),
('7', 'Булава или палка', '7'),
('8', 'Змей горыныч враг или не враг', '8'),
('9', 'Гитары и балалайки', '9'),
('10', 'Рецепты жаркого', '10')
;

INSERT INTO users_communities VALUES
('1', '1'),
('2', '4'),
('3', '5'),
('4', '6'),
('5', '7'),
('6', '10'),
('7', '9'),
('8', '8'),
('9', '3'),
('10', '2')
;

INSERT INTO friends_requests VALUES
('1', '2', 'approved','2011-04-20 17:01:49','2011-04-20 18:01:49'),
('2', '1', 'approved','2011-04-20 18:01:49','2011-04-20 18:40:00'),
('3', '2', 'approved','2011-05-20 18:01:49','2011-05-20 18:01:49'),
('5', '6', 'approved','2002-08-09 13:11:34','2002-08-17 11:58:56'),
('6', '5', 'approved','2002-11-22 08:19:31','2002-12-14 06:25:03'),
('2', '3', 'approved','2011-11-12 04:37:05','2011-11-12 17:13:11'),
('7', '2', 'approved','2000-04-30 18:50:29','2000-12-18 12:44:58'),
('8', '9', 'approved','1150-07-23 22:58:22','1150-08-26 17:25:16'),
('9', '8', 'approved','1151-09-11 02:04:43','1151-10-08 16:41:15'),
('7', '10', 'approved','2000-02-07 13:17:08','2000-08-24 13:45:43')
;

INSERT INTO media_types VALUES 
('1','грогги'),
('2','могги'),
('3','фогги'),
('4','догги'),
('5','бибип'),
('6','фуко'),
('7','молоко'),
('8','Хлебушек'),
('9','печеньки'),
('10','Яды')
;

INSERT INTO media VALUES 
('1','1','1','грогги','killa1.jpg',NULL,'1974-07-12 17:44:08','1986-04-29 15:56:08'),
('2','2','2','могги','killa2.jpg',NULL,'1976-03-13 21:25:30','2013-11-18 22:12:58'),
('3','3','3','фогги','killa3.jpg',NULL,'1972-04-27 09:29:42','1992-06-23 16:33:54'),
('4','4','4','догги','killa4.jpg',NULL,'1974-10-27 09:47:06','1976-02-06 12:26:26'),
('5','5','5','бибип','killa5.jpg',NULL,'1974-10-27 09:47:06','1976-02-06 12:26:26'),
('6','6','6','фуко','killa6.jpg',NULL,'1974-10-27 09:47:06','1976-02-06 12:26:26'),
('7','7','7','молоко','killa7.jpg',NULL,'1974-10-27 09:47:06','1976-02-06 12:26:26'),
('8','8','8','Хлебушек','killa8.jpg',NULL,'1974-10-27 09:47:06','1976-02-06 12:26:26'),
('9','9','9','печеньки','killa9.jpg',NULL,'1974-10-27 09:47:06','1976-02-06 12:26:26'),
('10','10','10','Яды','killa10.jpg',NULL,'1974-10-27 09:47:06','1976-02-06 12:26:26')
;

INSERT INTO users_music VALUES
('1','1','1','1','траляля',NULL,'2020-07-12 17:44:08','2021-04-29 15:56:08'),
('2','2','2','2','трололо',NULL,'2020-03-13 21:25:30','2021-11-18 22:12:58'),
('3','3','3','3','ляля',NULL,'2020-04-27 09:29:42','2020-06-23 16:33:54'),
('4','4','4','4','лоло',NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('5','5','5','5','дореми',NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('6','6','6','6','пфффф',NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('7','7','7','7','хихих',NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('8','8','8','8','баллада о волке',NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('9','9','9','9','История Руси',NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('10','10','10','10','раздватри',NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26')
;

INSERT INTO users_statuses VALUES
('1', '1', 'На воле хорошо','2011-04-20 17:01:49','2011-04-20 18:01:49'),
('2', '2', 'Блинчики и печеньки','2011-04-20 18:01:49','2011-04-20 18:40:00'),
('3', '3', 'Я как конь','2011-05-20 18:01:49','2011-05-20 18:01:49'),
('4', '4', 'пффффф','2002-08-09 13:11:34','2002-08-17 11:58:56'),
('5', '5', 'Я не человек-паук','2002-11-22 08:19:31','2002-12-14 06:25:03'),
('6', '6', 'Я не супер-мен','2011-11-12 04:37:05','2011-11-12 17:13:11'),
('7', '7', 'Нужно больше золота','2000-04-30 18:50:29','2000-12-18 12:44:58'),
('8', '8', 'Сплю','1150-07-23 22:58:22','1150-08-26 17:25:16'),
('9', '9', 'Драчки','1151-09-11 02:04:43','1151-10-08 16:41:15'),
('10', '10', 'Цири','2000-02-07 13:17:08','2000-08-24 13:45:43')
;

INSERT INTO users_storys VALUES
('1','1','1','сегодня','defolt1', NULL,'2020-07-12 17:44:08','2021-04-29 15:56:08'),
('2','2','2','Было дело','defolt2', NULL,'2020-03-13 21:25:30','2021-11-18 22:12:58'),
('3','3','3','Иногда но не всегда','defolt3', NULL,'2020-04-27 09:29:42','2020-06-23 16:33:54'),
('4','4','4','Треня','defolt4',NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('5','5','5','Люблю высоту','defolt5', NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('6','6','6','Бью тату лазером','defolt6', NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('7','7','7','Нужна команда на корабль','defolt7', NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('8','8','8','Ел пироги', 'defolt8',NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('9','9','9','Делаю пироги','defolt9', NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26'),
('10','10','10','Дикая охота','defolt10', NULL,'2020-10-27 09:47:06','2021-02-06 12:26:26')
;

INSERT INTO likes VALUES 
('1','1','1'),
('2','2','2'),
('3','3','3'),
('4','4','4'),
('5','5','5'),
('6','6','6'),
('7','7','7'),
('8','8','8'),
('9','9','9'),
('10','10','10')
;

INSERT INTO messages VALUES 
('1','1','2','Давай дружить','1986-04-29 15:56:08'),
('2','2','1','Неа','2013-11-18 22:12:58'),
('3','3','2','Вашей маме зять не нужен?','1992-06-23 16:33:54'),
('4','4','2','Ты хорошенькая!','1976-02-06 12:26:26'),
('5','5','6','А ты знаешь Бэтмена?','1976-02-06 12:26:26'),
('6','6','5','Да, это моя сучка','1976-02-06 12:26:26'),
('7','7','2','Хочешь увезу тебя на Мальдивы?','1976-02-06 12:26:26'),
('8','8','9','Пойдем бить морды сегодня?','1976-02-06 12:26:26'),
('9','9','8','Ага','1976-02-06 12:26:26'),
('10','2','10','Ты мое предназначение!','1976-02-06 12:26:26')
;

/* Задача 2
 Написать скрипт, возвращающий список имен (только firstname) пользователей без повторений в алфавитном порядке
*/

use vk;

SELECT DISTINCT firstname
FROM users ORDER BY firstname
;

/* Задача 3
  Написать скрипт, отмечающий несовершеннолетних пользователей как неактивных (поле is_active = false). Предварительно добавить такое поле в таблицу profiles со значением по умолчанию = true (или 1)
*/

use vk;

ALTER TABLE profiles ADD COLUMN is_active tinyint(1) NOT NULL AFTER birthday;

UPDATE profiles
SET is_active = '1'
WHERE user_id > 0; 

SELECT DISTINCT is_active
FROM profiles
WHERE is_active < 1
ORDER BY is_active ASC;

/* Задача 4
Написать скрипт, удаляющий сообщения «из будущего» (дата больше сегодняшней)
*/

use vk;

DELETE FROM messages WHERE created_at > DATE_SUB(NOW() , INTERVAL 1 DAY);
